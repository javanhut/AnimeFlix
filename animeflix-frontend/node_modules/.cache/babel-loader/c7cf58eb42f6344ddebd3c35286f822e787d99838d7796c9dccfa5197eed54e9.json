{"ast":null,"code":"var _jsxFileName = \"/home/javanstorm/AnimeFlix/animeflix-frontend/src/components/Player.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useEffect, forwardRef, useImperativeHandle } from 'react';\nimport './Player.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Player = /*#__PURE__*/_s(/*#__PURE__*/forwardRef(_c = _s(({\n  video,\n  onVideoEnd,\n  autoPlay = false\n}, ref) => {\n  _s();\n  const videoRef = useRef(null);\n  const playerContainerRef = useRef(null);\n  const progressRef = useRef(null);\n  const volumeRef = useRef(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isFullScreen, setIsFullScreen] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [volume, setVolume] = useState(1);\n  const [isMuted, setIsMuted] = useState(false);\n  const [showControls, setShowControls] = useState(true);\n  const [isBuffering, setIsBuffering] = useState(false);\n  const [hasError, setHasError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [currentLanguage, setCurrentLanguage] = useState('sub');\n  const [showLanguageMenu, setShowLanguageMenu] = useState(false);\n  const [skipFeedback, setSkipFeedback] = useState({\n    show: false,\n    direction: '',\n    amount: 0\n  });\n  const [isPiPSupported, setIsPiPSupported] = useState(false);\n  const [isPiPActive, setIsPiPActive] = useState(false);\n\n  // Expose methods to parent component via ref\n  useImperativeHandle(ref, () => ({\n    playAndFullscreen: () => {\n      setIsPlaying(true);\n      if (playerContainerRef.current && !isFullScreen) {\n        if (playerContainerRef.current.requestFullscreen) {\n          playerContainerRef.current.requestFullscreen().catch(err => {\n            console.log('Fullscreen request failed:', err);\n          });\n        } else if (playerContainerRef.current.mozRequestFullScreen) {\n          playerContainerRef.current.mozRequestFullScreen().catch(err => {\n            console.log('Fullscreen request failed:', err);\n          });\n        } else if (playerContainerRef.current.webkitRequestFullscreen) {\n          playerContainerRef.current.webkitRequestFullscreen().catch(err => {\n            console.log('Fullscreen request failed:', err);\n          });\n        } else if (playerContainerRef.current.msRequestFullscreen) {\n          playerContainerRef.current.msRequestFullscreen().catch(err => {\n            console.log('Fullscreen request failed:', err);\n          });\n        }\n      }\n    }\n  }));\n  useEffect(() => {\n    if (videoRef.current) {\n      if (isPlaying) {\n        videoRef.current.play().catch(error => {\n          console.error(\"Error attempting to play video:\", error);\n          setIsPlaying(false);\n        });\n      } else {\n        videoRef.current.pause();\n      }\n    }\n  }, [isPlaying, video]);\n\n  // Initialize language preference from video data or user preference\n  useEffect(() => {\n    if (video) {\n      // Get user's saved language preference\n      const savedLanguage = localStorage.getItem('preferredLanguage');\n      if (video.videoSources) {\n        // Use video's default language if available, otherwise use saved preference\n        const defaultLang = video.defaultLanguage || savedLanguage || 'sub';\n\n        // Check if the preferred language is available for this video\n        if (video.videoSources[defaultLang]) {\n          setCurrentLanguage(defaultLang);\n        } else {\n          // Fallback to sub if preferred language isn't available\n          setCurrentLanguage('sub');\n        }\n      } else {\n        // Legacy video format - use current videoUrl\n        setCurrentLanguage('sub');\n      }\n    }\n  }, [video]);\n\n  // Handle language switching\n  const switchLanguage = language => {\n    if (!video.videoSources || !video.videoSources[language]) {\n      console.log('Cannot switch language - no video sources or language not available');\n      return;\n    }\n    const wasPlaying = isPlaying;\n    const currentTimeStamp = videoRef.current ? videoRef.current.currentTime : 0;\n    setCurrentLanguage(language);\n    setShowLanguageMenu(false);\n\n    // Save user preference\n    localStorage.setItem('preferredLanguage', language);\n\n    // Update video source and maintain playback position\n    if (videoRef.current) {\n      const newSource = video.videoSources[language];\n      setIsBuffering(true);\n      videoRef.current.src = newSource;\n      videoRef.current.load();\n      const handleCanPlay = () => {\n        videoRef.current.currentTime = currentTimeStamp;\n        if (wasPlaying) {\n          videoRef.current.play().then(() => {\n            setIsPlaying(true);\n            setIsBuffering(false);\n          }).catch(() => {\n            setIsPlaying(false);\n            setIsBuffering(false);\n          });\n        } else {\n          setIsBuffering(false);\n        }\n        videoRef.current.removeEventListener('canplay', handleCanPlay);\n      };\n      videoRef.current.addEventListener('canplay', handleCanPlay);\n    }\n  };\n\n  // Get available languages for this video\n  const getAvailableLanguages = () => {\n    if (!video) {\n      return [{\n        key: 'sub',\n        label: 'Japanese (Sub)'\n      }, {\n        key: 'dub',\n        label: 'English (Dub)'\n      }];\n    }\n    if (!video.videoSources) {\n      return [{\n        key: 'sub',\n        label: 'Japanese (Sub)'\n      }];\n    }\n    const languages = [];\n    if (video.videoSources.sub) languages.push({\n      key: 'sub',\n      label: 'Japanese (Sub)'\n    });\n    if (video.videoSources.dub) languages.push({\n      key: 'dub',\n      label: 'English (Dub)'\n    });\n    return languages;\n  };\n  useEffect(() => {\n    if (autoPlay && videoRef.current) {\n      setIsPlaying(true);\n    }\n  }, [autoPlay, video]);\n\n  // Check Picture-in-Picture support\n  useEffect(() => {\n    if (videoRef.current && 'pictureInPictureEnabled' in document) {\n      setIsPiPSupported(true);\n      const handlePiPEnter = () => setIsPiPActive(true);\n      const handlePiPLeave = () => setIsPiPActive(false);\n      videoRef.current.addEventListener('enterpictureinpicture', handlePiPEnter);\n      videoRef.current.addEventListener('leavepictureinpicture', handlePiPLeave);\n      return () => {\n        if (videoRef.current) {\n          videoRef.current.removeEventListener('enterpictureinpicture', handlePiPEnter);\n          videoRef.current.removeEventListener('leavepictureinpicture', handlePiPLeave);\n        }\n      };\n    }\n  }, [video]);\n  useEffect(() => {\n    const video = videoRef.current;\n    if (!video) return;\n    const updateTime = () => setCurrentTime(video.currentTime);\n    const updateDuration = () => setDuration(video.duration);\n    const handleWaiting = () => setIsBuffering(true);\n    const handleCanPlay = () => setIsBuffering(false);\n    const handleEnded = () => {\n      setIsPlaying(false);\n      if (onVideoEnd) onVideoEnd();\n    };\n    const handleError = e => {\n      var _e$target, _e$target$error;\n      setHasError(true);\n      setIsBuffering(false);\n      setIsPlaying(false);\n\n      // More specific error messages\n      const errorCode = (_e$target = e.target) === null || _e$target === void 0 ? void 0 : (_e$target$error = _e$target.error) === null || _e$target$error === void 0 ? void 0 : _e$target$error.code;\n      let errorMsg = 'Unable to load video. Please try again later.';\n      switch (errorCode) {\n        case 1:\n          // MEDIA_ERR_ABORTED\n          errorMsg = 'Video loading was aborted.';\n          break;\n        case 2:\n          // MEDIA_ERR_NETWORK\n          errorMsg = 'Network error occurred while loading video.';\n          break;\n        case 3:\n          // MEDIA_ERR_DECODE\n          errorMsg = 'Video format not supported or corrupted.';\n          break;\n        case 4:\n          // MEDIA_ERR_SRC_NOT_SUPPORTED\n          errorMsg = 'Video source not supported or not found.';\n          break;\n        default:\n          errorMsg = 'Unable to load video. Please try again later.';\n      }\n      setErrorMessage(errorMsg);\n    };\n    const handleLoadStart = () => {\n      setHasError(false);\n      setErrorMessage('');\n    };\n    video.addEventListener('timeupdate', updateTime);\n    video.addEventListener('loadedmetadata', updateDuration);\n    video.addEventListener('waiting', handleWaiting);\n    video.addEventListener('canplay', handleCanPlay);\n    video.addEventListener('ended', handleEnded);\n    video.addEventListener('error', handleError);\n    video.addEventListener('loadstart', handleLoadStart);\n    return () => {\n      video.removeEventListener('timeupdate', updateTime);\n      video.removeEventListener('loadedmetadata', updateDuration);\n      video.removeEventListener('waiting', handleWaiting);\n      video.removeEventListener('canplay', handleCanPlay);\n      video.removeEventListener('ended', handleEnded);\n      video.removeEventListener('error', handleError);\n      video.removeEventListener('loadstart', handleLoadStart);\n    };\n  }, [onVideoEnd]);\n  useEffect(() => {\n    let timeout;\n    const resetControlsTimeout = () => {\n      clearTimeout(timeout);\n      setShowControls(true);\n      if (playerContainerRef.current) {\n        playerContainerRef.current.style.cursor = 'default';\n      }\n      timeout = setTimeout(() => {\n        if (isPlaying) {\n          setShowControls(false);\n          if (playerContainerRef.current) {\n            playerContainerRef.current.style.cursor = 'none';\n          }\n        }\n      }, 3000);\n    };\n    const handleMouseMove = () => resetControlsTimeout();\n    const handleMouseLeave = () => {\n      if (isPlaying) {\n        setShowControls(false);\n        if (playerContainerRef.current) {\n          playerContainerRef.current.style.cursor = 'none';\n        }\n      }\n    };\n    const container = playerContainerRef.current;\n    if (container) {\n      container.addEventListener('mousemove', handleMouseMove);\n      container.addEventListener('mouseleave', handleMouseLeave);\n    }\n    resetControlsTimeout();\n    return () => {\n      clearTimeout(timeout);\n      if (container) {\n        container.removeEventListener('mousemove', handleMouseMove);\n        container.removeEventListener('mouseleave', handleMouseLeave);\n      }\n    };\n  }, [isPlaying]);\n  useEffect(() => {\n    const handleFullScreenChange = () => {\n      setIsFullScreen(document.fullscreenElement != null);\n    };\n    document.addEventListener('fullscreenchange', handleFullScreenChange);\n    document.addEventListener('webkitfullscreenchange', handleFullScreenChange);\n    document.addEventListener('mozfullscreenchange', handleFullScreenChange);\n    document.addEventListener('MSFullscreenChange', handleFullScreenChange);\n    return () => {\n      document.removeEventListener('fullscreenchange', handleFullScreenChange);\n      document.removeEventListener('webkitfullscreenchange', handleFullScreenChange);\n      document.removeEventListener('mozfullscreenchange', handleFullScreenChange);\n      document.removeEventListener('MSFullscreenChange', handleFullScreenChange);\n    };\n  }, []);\n  useEffect(() => {\n    const keyPressHandler = e => {\n      // Only handle keys when player is focused or video is playing\n      if (document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'TEXTAREA') {\n        return; // Don't interfere with form inputs\n      }\n      switch (e.key) {\n        case ' ':\n          e.preventDefault();\n          togglePlay();\n          break;\n        case 'f':\n        case 'F':\n          e.preventDefault();\n          toggleFullScreen();\n          break;\n        case 'm':\n        case 'M':\n          e.preventDefault();\n          toggleMute();\n          break;\n        case 'ArrowLeft':\n          e.preventDefault();\n          seek(-10);\n          break;\n        case 'ArrowRight':\n          e.preventDefault();\n          seek(10);\n          break;\n        case 'ArrowUp':\n          e.preventDefault();\n          adjustVolume(0.1);\n          break;\n        case 'ArrowDown':\n          e.preventDefault();\n          adjustVolume(-0.1);\n          break;\n        case 'Escape':\n          e.preventDefault();\n          if (showLanguageMenu) {\n            setShowLanguageMenu(false);\n          } else if (isPiPActive) {\n            togglePictureInPicture();\n          } else if (isFullScreen) {\n            toggleFullScreen();\n          }\n          break;\n        case 'p':\n        case 'P':\n          e.preventDefault();\n          if (isPiPSupported) {\n            togglePictureInPicture();\n          }\n          break;\n        case '0':\n        case '1':\n        case '2':\n        case '3':\n        case '4':\n        case '5':\n        case '6':\n        case '7':\n        case '8':\n        case '9':\n          e.preventDefault();\n          const percent = parseInt(e.key) * 10;\n          seekToPercent(percent);\n          break;\n        default:\n          break;\n      }\n    };\n    document.addEventListener('keydown', keyPressHandler);\n    return () => document.removeEventListener('keydown', keyPressHandler);\n  }, [showLanguageMenu, isFullScreen, isPiPActive, isPiPSupported]);\n\n  // Close language menu when clicking outside\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (showLanguageMenu && !event.target.closest('.language-container')) {\n        setShowLanguageMenu(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [showLanguageMenu]);\n  if (!video) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 12\n    }, this);\n  }\n  const togglePlay = () => {\n    const wasPlaying = isPlaying;\n    setIsPlaying(!isPlaying);\n\n    // Enter fullscreen when user starts playing for the first time\n    if (!wasPlaying && !isFullScreen && playerContainerRef.current) {\n      setTimeout(() => {\n        if (playerContainerRef.current.requestFullscreen) {\n          playerContainerRef.current.requestFullscreen().catch(err => {\n            console.log('Fullscreen request failed:', err);\n          });\n        } else if (playerContainerRef.current.mozRequestFullScreen) {\n          playerContainerRef.current.mozRequestFullScreen().catch(err => {\n            console.log('Fullscreen request failed:', err);\n          });\n        } else if (playerContainerRef.current.webkitRequestFullscreen) {\n          playerContainerRef.current.webkitRequestFullscreen().catch(err => {\n            console.log('Fullscreen request failed:', err);\n          });\n        } else if (playerContainerRef.current.msRequestFullscreen) {\n          playerContainerRef.current.msRequestFullscreen().catch(err => {\n            console.log('Fullscreen request failed:', err);\n          });\n        }\n      }, 100);\n    }\n  };\n  const seek = seconds => {\n    if (videoRef.current) {\n      videoRef.current.currentTime = Math.max(0, Math.min(videoRef.current.currentTime + seconds, duration));\n\n      // Show skip feedback\n      setSkipFeedback({\n        show: true,\n        direction: seconds > 0 ? 'forward' : 'backward',\n        amount: Math.abs(seconds)\n      });\n\n      // Hide feedback after animation\n      setTimeout(() => {\n        setSkipFeedback({\n          show: false,\n          direction: '',\n          amount: 0\n        });\n      }, 1000);\n    }\n  };\n  const restartVideo = () => {\n    if (videoRef.current) {\n      videoRef.current.currentTime = 0;\n      setSkipFeedback({\n        show: true,\n        direction: 'restart',\n        amount: 0\n      });\n\n      // Hide feedback after animation\n      setTimeout(() => {\n        setSkipFeedback({\n          show: false,\n          direction: '',\n          amount: 0\n        });\n      }, 1000);\n    }\n  };\n  const seekToPercent = percent => {\n    if (videoRef.current && duration) {\n      videoRef.current.currentTime = percent / 100 * duration;\n    }\n  };\n  const adjustVolume = delta => {\n    if (videoRef.current) {\n      const newVolume = Math.max(0, Math.min(1, volume + delta));\n      setVolume(newVolume);\n      setIsMuted(newVolume === 0);\n      videoRef.current.volume = newVolume;\n    }\n  };\n  const handleProgressClick = e => {\n    if (!progressRef.current || !videoRef.current) return;\n    const rect = progressRef.current.getBoundingClientRect();\n    const pos = (e.clientX - rect.left) / rect.width;\n    videoRef.current.currentTime = pos * duration;\n  };\n  const handleVolumeChange = e => {\n    const newVolume = parseFloat(e.target.value);\n    setVolume(newVolume);\n    setIsMuted(newVolume === 0);\n    if (videoRef.current) {\n      videoRef.current.volume = newVolume;\n    }\n  };\n  const toggleMute = () => {\n    if (videoRef.current) {\n      if (isMuted) {\n        videoRef.current.volume = volume;\n        setIsMuted(false);\n      } else {\n        videoRef.current.volume = 0;\n        setIsMuted(true);\n      }\n    }\n  };\n  const formatTime = time => {\n    if (isNaN(time)) return '0:00';\n    const hours = Math.floor(time / 3600);\n    const minutes = Math.floor(time % 3600 / 60);\n    const seconds = Math.floor(time % 60);\n    if (hours > 0) {\n      return `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n    }\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n  };\n  const toggleFullScreen = () => {\n    if (!isFullScreen) {\n      if (playerContainerRef.current.requestFullscreen) {\n        playerContainerRef.current.requestFullscreen();\n      } else if (playerContainerRef.current.mozRequestFullScreen) {\n        /* Firefox */\n        playerContainerRef.current.mozRequestFullScreen();\n      } else if (playerContainerRef.current.webkitRequestFullscreen) {\n        /* Chrome, Safari and Opera */\n        playerContainerRef.current.webkitRequestFullscreen();\n      } else if (playerContainerRef.current.msRequestFullscreen) {\n        /* IE/Edge */\n        playerContainerRef.current.msRequestFullscreen();\n      }\n    } else {\n      if (document.exitFullscreen) {\n        document.exitFullscreen();\n      } else if (document.mozCancelFullScreen) {\n        /* Firefox */\n        document.mozCancelFullScreen();\n      } else if (document.webkitExitFullscreen) {\n        /* Chrome, Safari and Opera */\n        document.webkitExitFullscreen();\n      } else if (document.msExitFullscreen) {\n        /* IE/Edge */\n        document.msExitFullscreen();\n      }\n    }\n  };\n  const togglePictureInPicture = async () => {\n    if (!videoRef.current || !isPiPSupported) return;\n    try {\n      if (isPiPActive) {\n        await document.exitPictureInPicture();\n      } else {\n        await videoRef.current.requestPictureInPicture();\n      }\n    } catch (error) {\n      console.error('Picture-in-Picture error:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `player-container ${isFullScreen ? 'fullscreen' : ''}`,\n    ref: playerContainerRef,\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      className: \"video-player\",\n      src: video.videoSources ? video.videoSources[currentLanguage] : video.videoUrl,\n      onClick: togglePlay\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 553,\n      columnNumber: 7\n    }, this), isBuffering && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 562,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 561,\n      columnNumber: 9\n    }, this), hasError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-exclamation-triangle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Video Error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 570,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: errorMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"retry-btn\",\n          onClick: () => {\n            setHasError(false);\n            setErrorMessage('');\n            if (videoRef.current) {\n              videoRef.current.load();\n            }\n          },\n          children: \"Try Again\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 567,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `player-controls ${showControls ? 'visible' : 'hidden'}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-bar\",\n          ref: progressRef,\n          onClick: handleProgressClick,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-filled\",\n            style: {\n              width: `${currentTime / duration * 100}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 591,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 590,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 589,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"controls-bottom\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"controls-left\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"control-btn\",\n            onClick: togglePlay,\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: `fas ${isPlaying ? 'fa-pause' : 'fa-play'}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 601,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 600,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"control-btn\",\n            onClick: () => seek(-10),\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-backward\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 605,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"seek-text\",\n              children: \"10\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 606,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 604,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"control-btn\",\n            onClick: () => seek(10),\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-forward\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 610,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"seek-text\",\n              children: \"10\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 611,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 609,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"control-btn\",\n            onClick: restartVideo,\n            title: \"Restart from beginning\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-redo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 615,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 614,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"volume-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"control-btn\",\n              onClick: toggleMute,\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: `fas ${isMuted || volume === 0 ? 'fa-volume-mute' : volume < 0.5 ? 'fa-volume-down' : 'fa-volume-up'}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 620,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 619,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"range\",\n              min: \"0\",\n              max: \"1\",\n              step: \"0.1\",\n              value: isMuted ? 0 : volume,\n              onChange: handleVolumeChange,\n              className: \"volume-slider\",\n              ref: volumeRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 622,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 618,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"time-display\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [formatTime(currentTime), \" / \", formatTime(duration)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 635,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 634,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 599,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"controls-right\",\n          children: [video && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"language-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"control-btn language-btn\",\n              onClick: () => setShowLanguageMenu(!showLanguageMenu),\n              title: \"Switch Language\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-language\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 648,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"language-text\",\n                children: currentLanguage === 'sub' ? 'SUB' : 'DUB'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 649,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 643,\n              columnNumber: 17\n            }, this), showLanguageMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"language-menu\",\n              children: getAvailableLanguages().map(lang => /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `language-option ${currentLanguage === lang.key ? 'active' : ''}`,\n                onClick: () => switchLanguage(lang.key),\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: `fas ${lang.key === 'sub' ? 'fa-closed-captioning' : 'fa-microphone'}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 662,\n                  columnNumber: 25\n                }, this), lang.label]\n              }, lang.key, true, {\n                fileName: _jsxFileName,\n                lineNumber: 657,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 655,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 642,\n            columnNumber: 15\n          }, this), isPiPSupported && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"control-btn\",\n            onClick: togglePictureInPicture,\n            title: isPiPActive ? 'Exit Picture-in-Picture' : 'Picture-in-Picture',\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: `fas ${isPiPActive ? 'fa-window-restore' : 'fa-clone'}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 677,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 672,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"control-btn\",\n            onClick: toggleFullScreen,\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: `fas ${isFullScreen ? 'fa-compress' : 'fa-expand'}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 682,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 681,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 639,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 598,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 588,\n      columnNumber: 7\n    }, this), skipFeedback.show && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `skip-feedback ${skipFeedback.direction}`,\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: `fas ${skipFeedback.direction === 'forward' ? 'fa-forward' : skipFeedback.direction === 'backward' ? 'fa-backward' : 'fa-redo'}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 691,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: skipFeedback.direction === 'restart' ? 'Restart' : `${skipFeedback.amount}s`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 696,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 690,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"center-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"center-play-btn\",\n        onClick: togglePlay,\n        style: {\n          display: isPlaying ? 'none' : 'flex'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-play\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 704,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 703,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"seek-area seek-backward\",\n        onClick: () => seek(-10),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"seek-indicator\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-backward\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 710,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"10s\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 711,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 709,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 708,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"seek-area seek-forward\",\n        onClick: () => seek(10),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"seek-indicator\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-forward\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 717,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"10s\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 718,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 716,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 715,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 702,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 552,\n    columnNumber: 5\n  }, this);\n}, \"abq86ufYP/7hqMTjs8sGx5ReaW4=\")), \"abq86ufYP/7hqMTjs8sGx5ReaW4=\");\n_c2 = Player;\nPlayer.displayName = 'Player';\nexport default Player;\nvar _c, _c2;\n$RefreshReg$(_c, \"Player$forwardRef\");\n$RefreshReg$(_c2, \"Player\");","map":{"version":3,"names":["React","useRef","useState","useEffect","forwardRef","useImperativeHandle","jsxDEV","_jsxDEV","Player","_s","_c","video","onVideoEnd","autoPlay","ref","videoRef","playerContainerRef","progressRef","volumeRef","isPlaying","setIsPlaying","isFullScreen","setIsFullScreen","currentTime","setCurrentTime","duration","setDuration","volume","setVolume","isMuted","setIsMuted","showControls","setShowControls","isBuffering","setIsBuffering","hasError","setHasError","errorMessage","setErrorMessage","currentLanguage","setCurrentLanguage","showLanguageMenu","setShowLanguageMenu","skipFeedback","setSkipFeedback","show","direction","amount","isPiPSupported","setIsPiPSupported","isPiPActive","setIsPiPActive","playAndFullscreen","current","requestFullscreen","catch","err","console","log","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","play","error","pause","savedLanguage","localStorage","getItem","videoSources","defaultLang","defaultLanguage","switchLanguage","language","wasPlaying","currentTimeStamp","setItem","newSource","src","load","handleCanPlay","then","removeEventListener","addEventListener","getAvailableLanguages","key","label","languages","sub","push","dub","document","handlePiPEnter","handlePiPLeave","updateTime","updateDuration","handleWaiting","handleEnded","handleError","e","_e$target","_e$target$error","errorCode","target","code","errorMsg","handleLoadStart","timeout","resetControlsTimeout","clearTimeout","style","cursor","setTimeout","handleMouseMove","handleMouseLeave","container","handleFullScreenChange","fullscreenElement","keyPressHandler","activeElement","tagName","preventDefault","togglePlay","toggleFullScreen","toggleMute","seek","adjustVolume","togglePictureInPicture","percent","parseInt","seekToPercent","handleClickOutside","event","closest","children","fileName","_jsxFileName","lineNumber","columnNumber","seconds","Math","max","min","abs","restartVideo","delta","newVolume","handleProgressClick","rect","getBoundingClientRect","pos","clientX","left","width","handleVolumeChange","parseFloat","value","formatTime","time","isNaN","hours","floor","minutes","toString","padStart","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","exitPictureInPicture","requestPictureInPicture","className","videoUrl","onClick","title","type","step","onChange","map","lang","display","_c2","displayName","$RefreshReg$"],"sources":["/home/javanstorm/AnimeFlix/animeflix-frontend/src/components/Player.js"],"sourcesContent":["import React, { useRef, useState, useEffect, forwardRef, useImperativeHandle } from 'react';\nimport './Player.css';\n\nconst Player = forwardRef(({ video, onVideoEnd, autoPlay = false }, ref) => {\n  const videoRef = useRef(null);\n  const playerContainerRef = useRef(null);\n  const progressRef = useRef(null);\n  const volumeRef = useRef(null);\n  \n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isFullScreen, setIsFullScreen] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [volume, setVolume] = useState(1);\n  const [isMuted, setIsMuted] = useState(false);\n  const [showControls, setShowControls] = useState(true);\n  const [isBuffering, setIsBuffering] = useState(false);\n  const [hasError, setHasError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [currentLanguage, setCurrentLanguage] = useState('sub');\n  const [showLanguageMenu, setShowLanguageMenu] = useState(false);\n  const [skipFeedback, setSkipFeedback] = useState({ show: false, direction: '', amount: 0 });\n  const [isPiPSupported, setIsPiPSupported] = useState(false);\n  const [isPiPActive, setIsPiPActive] = useState(false);\n\n  // Expose methods to parent component via ref\n  useImperativeHandle(ref, () => ({\n    playAndFullscreen: () => {\n      setIsPlaying(true);\n      if (playerContainerRef.current && !isFullScreen) {\n        if (playerContainerRef.current.requestFullscreen) {\n          playerContainerRef.current.requestFullscreen().catch(err => {\n            console.log('Fullscreen request failed:', err);\n          });\n        } else if (playerContainerRef.current.mozRequestFullScreen) {\n          playerContainerRef.current.mozRequestFullScreen().catch(err => {\n            console.log('Fullscreen request failed:', err);\n          });\n        } else if (playerContainerRef.current.webkitRequestFullscreen) {\n          playerContainerRef.current.webkitRequestFullscreen().catch(err => {\n            console.log('Fullscreen request failed:', err);\n          });\n        } else if (playerContainerRef.current.msRequestFullscreen) {\n          playerContainerRef.current.msRequestFullscreen().catch(err => {\n            console.log('Fullscreen request failed:', err);\n          });\n        }\n      }\n    }\n  }));\n\n  useEffect(() => {\n    if (videoRef.current) {\n      if (isPlaying) {\n        videoRef.current.play().catch(error => {\n          console.error(\"Error attempting to play video:\", error);\n          setIsPlaying(false);\n        });\n      } else {\n        videoRef.current.pause();\n      }\n    }\n  }, [isPlaying, video]);\n\n  // Initialize language preference from video data or user preference\n  useEffect(() => {\n    if (video) {\n      // Get user's saved language preference\n      const savedLanguage = localStorage.getItem('preferredLanguage');\n      \n      if (video.videoSources) {\n        // Use video's default language if available, otherwise use saved preference\n        const defaultLang = video.defaultLanguage || savedLanguage || 'sub';\n        \n        // Check if the preferred language is available for this video\n        if (video.videoSources[defaultLang]) {\n          setCurrentLanguage(defaultLang);\n        } else {\n          // Fallback to sub if preferred language isn't available\n          setCurrentLanguage('sub');\n        }\n      } else {\n        // Legacy video format - use current videoUrl\n        setCurrentLanguage('sub');\n      }\n    }\n  }, [video]);\n\n  // Handle language switching\n  const switchLanguage = (language) => {\n    if (!video.videoSources || !video.videoSources[language]) {\n      console.log('Cannot switch language - no video sources or language not available');\n      return;\n    }\n    \n    const wasPlaying = isPlaying;\n    const currentTimeStamp = videoRef.current ? videoRef.current.currentTime : 0;\n    \n    setCurrentLanguage(language);\n    setShowLanguageMenu(false);\n    \n    // Save user preference\n    localStorage.setItem('preferredLanguage', language);\n    \n    // Update video source and maintain playback position\n    if (videoRef.current) {\n      const newSource = video.videoSources[language];\n      setIsBuffering(true);\n      \n      videoRef.current.src = newSource;\n      videoRef.current.load();\n      \n      const handleCanPlay = () => {\n        videoRef.current.currentTime = currentTimeStamp;\n        if (wasPlaying) {\n          videoRef.current.play().then(() => {\n            setIsPlaying(true);\n            setIsBuffering(false);\n          }).catch(() => {\n            setIsPlaying(false);\n            setIsBuffering(false);\n          });\n        } else {\n          setIsBuffering(false);\n        }\n        videoRef.current.removeEventListener('canplay', handleCanPlay);\n      };\n      \n      videoRef.current.addEventListener('canplay', handleCanPlay);\n    }\n  };\n\n  // Get available languages for this video\n  const getAvailableLanguages = () => {\n    if (!video) {\n      return [{ key: 'sub', label: 'Japanese (Sub)' }, { key: 'dub', label: 'English (Dub)' }];\n    }\n    \n    if (!video.videoSources) {\n      return [{ key: 'sub', label: 'Japanese (Sub)' }];\n    }\n    \n    const languages = [];\n    if (video.videoSources.sub) languages.push({ key: 'sub', label: 'Japanese (Sub)' });\n    if (video.videoSources.dub) languages.push({ key: 'dub', label: 'English (Dub)' });\n    \n    return languages;\n  };\n\n  useEffect(() => {\n    if (autoPlay && videoRef.current) {\n      setIsPlaying(true);\n    }\n  }, [autoPlay, video]);\n\n  // Check Picture-in-Picture support\n  useEffect(() => {\n    if (videoRef.current && 'pictureInPictureEnabled' in document) {\n      setIsPiPSupported(true);\n      \n      const handlePiPEnter = () => setIsPiPActive(true);\n      const handlePiPLeave = () => setIsPiPActive(false);\n      \n      videoRef.current.addEventListener('enterpictureinpicture', handlePiPEnter);\n      videoRef.current.addEventListener('leavepictureinpicture', handlePiPLeave);\n      \n      return () => {\n        if (videoRef.current) {\n          videoRef.current.removeEventListener('enterpictureinpicture', handlePiPEnter);\n          videoRef.current.removeEventListener('leavepictureinpicture', handlePiPLeave);\n        }\n      };\n    }\n  }, [video]);\n\n  useEffect(() => {\n    const video = videoRef.current;\n    if (!video) return;\n\n    const updateTime = () => setCurrentTime(video.currentTime);\n    const updateDuration = () => setDuration(video.duration);\n    const handleWaiting = () => setIsBuffering(true);\n    const handleCanPlay = () => setIsBuffering(false);\n    const handleEnded = () => {\n      setIsPlaying(false);\n      if (onVideoEnd) onVideoEnd();\n    };\n    const handleError = (e) => {\n      setHasError(true);\n      setIsBuffering(false);\n      setIsPlaying(false);\n      \n      // More specific error messages\n      const errorCode = e.target?.error?.code;\n      let errorMsg = 'Unable to load video. Please try again later.';\n      \n      switch (errorCode) {\n        case 1: // MEDIA_ERR_ABORTED\n          errorMsg = 'Video loading was aborted.';\n          break;\n        case 2: // MEDIA_ERR_NETWORK\n          errorMsg = 'Network error occurred while loading video.';\n          break;\n        case 3: // MEDIA_ERR_DECODE\n          errorMsg = 'Video format not supported or corrupted.';\n          break;\n        case 4: // MEDIA_ERR_SRC_NOT_SUPPORTED\n          errorMsg = 'Video source not supported or not found.';\n          break;\n        default:\n          errorMsg = 'Unable to load video. Please try again later.';\n      }\n      \n      setErrorMessage(errorMsg);\n    };\n    const handleLoadStart = () => {\n      setHasError(false);\n      setErrorMessage('');\n    };\n\n    video.addEventListener('timeupdate', updateTime);\n    video.addEventListener('loadedmetadata', updateDuration);\n    video.addEventListener('waiting', handleWaiting);\n    video.addEventListener('canplay', handleCanPlay);\n    video.addEventListener('ended', handleEnded);\n    video.addEventListener('error', handleError);\n    video.addEventListener('loadstart', handleLoadStart);\n\n    return () => {\n      video.removeEventListener('timeupdate', updateTime);\n      video.removeEventListener('loadedmetadata', updateDuration);\n      video.removeEventListener('waiting', handleWaiting);\n      video.removeEventListener('canplay', handleCanPlay);\n      video.removeEventListener('ended', handleEnded);\n      video.removeEventListener('error', handleError);\n      video.removeEventListener('loadstart', handleLoadStart);\n    };\n  }, [onVideoEnd]);\n\n  useEffect(() => {\n    let timeout;\n    const resetControlsTimeout = () => {\n      clearTimeout(timeout);\n      setShowControls(true);\n      if (playerContainerRef.current) {\n        playerContainerRef.current.style.cursor = 'default';\n      }\n      timeout = setTimeout(() => {\n        if (isPlaying) {\n          setShowControls(false);\n          if (playerContainerRef.current) {\n            playerContainerRef.current.style.cursor = 'none';\n          }\n        }\n      }, 3000);\n    };\n\n    const handleMouseMove = () => resetControlsTimeout();\n    const handleMouseLeave = () => {\n      if (isPlaying) {\n        setShowControls(false);\n        if (playerContainerRef.current) {\n          playerContainerRef.current.style.cursor = 'none';\n        }\n      }\n    };\n\n    const container = playerContainerRef.current;\n    if (container) {\n      container.addEventListener('mousemove', handleMouseMove);\n      container.addEventListener('mouseleave', handleMouseLeave);\n    }\n\n    resetControlsTimeout();\n\n    return () => {\n      clearTimeout(timeout);\n      if (container) {\n        container.removeEventListener('mousemove', handleMouseMove);\n        container.removeEventListener('mouseleave', handleMouseLeave);\n      }\n    };\n  }, [isPlaying]);\n\n  useEffect(() => {\n    const handleFullScreenChange = () => {\n      setIsFullScreen(document.fullscreenElement != null);\n    };\n\n    document.addEventListener('fullscreenchange', handleFullScreenChange);\n    document.addEventListener('webkitfullscreenchange', handleFullScreenChange);\n    document.addEventListener('mozfullscreenchange', handleFullScreenChange);\n    document.addEventListener('MSFullscreenChange', handleFullScreenChange);\n\n    return () => {\n      document.removeEventListener('fullscreenchange', handleFullScreenChange);\n      document.removeEventListener('webkitfullscreenchange', handleFullScreenChange);\n      document.removeEventListener('mozfullscreenchange', handleFullScreenChange);\n      document.removeEventListener('MSFullscreenChange', handleFullScreenChange);\n    };\n  }, []);\n\n  useEffect(() => {\n    const keyPressHandler = (e) => {\n      // Only handle keys when player is focused or video is playing\n      if (document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'TEXTAREA') {\n        return; // Don't interfere with form inputs\n      }\n\n      switch (e.key) {\n        case ' ':\n          e.preventDefault();\n          togglePlay();\n          break;\n        case 'f':\n        case 'F':\n          e.preventDefault();\n          toggleFullScreen();\n          break;\n        case 'm':\n        case 'M':\n          e.preventDefault();\n          toggleMute();\n          break;\n        case 'ArrowLeft':\n          e.preventDefault();\n          seek(-10);\n          break;\n        case 'ArrowRight':\n          e.preventDefault();\n          seek(10);\n          break;\n        case 'ArrowUp':\n          e.preventDefault();\n          adjustVolume(0.1);\n          break;\n        case 'ArrowDown':\n          e.preventDefault();\n          adjustVolume(-0.1);\n          break;\n        case 'Escape':\n          e.preventDefault();\n          if (showLanguageMenu) {\n            setShowLanguageMenu(false);\n          } else if (isPiPActive) {\n            togglePictureInPicture();\n          } else if (isFullScreen) {\n            toggleFullScreen();\n          }\n          break;\n        case 'p':\n        case 'P':\n          e.preventDefault();\n          if (isPiPSupported) {\n            togglePictureInPicture();\n          }\n          break;\n        case '0':\n        case '1':\n        case '2':\n        case '3':\n        case '4':\n        case '5':\n        case '6':\n        case '7':\n        case '8':\n        case '9':\n          e.preventDefault();\n          const percent = parseInt(e.key) * 10;\n          seekToPercent(percent);\n          break;\n        default:\n          break;\n      }\n    };\n\n    document.addEventListener('keydown', keyPressHandler);\n    return () => document.removeEventListener('keydown', keyPressHandler);\n  }, [showLanguageMenu, isFullScreen, isPiPActive, isPiPSupported]);\n\n  // Close language menu when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (showLanguageMenu && !event.target.closest('.language-container')) {\n        setShowLanguageMenu(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [showLanguageMenu]);\n\n  if (!video) {\n    return <div>Loading...</div>;\n  }\n\n  const togglePlay = () => {\n    const wasPlaying = isPlaying;\n    setIsPlaying(!isPlaying);\n    \n    // Enter fullscreen when user starts playing for the first time\n    if (!wasPlaying && !isFullScreen && playerContainerRef.current) {\n      setTimeout(() => {\n        if (playerContainerRef.current.requestFullscreen) {\n          playerContainerRef.current.requestFullscreen().catch(err => {\n            console.log('Fullscreen request failed:', err);\n          });\n        } else if (playerContainerRef.current.mozRequestFullScreen) {\n          playerContainerRef.current.mozRequestFullScreen().catch(err => {\n            console.log('Fullscreen request failed:', err);\n          });\n        } else if (playerContainerRef.current.webkitRequestFullscreen) {\n          playerContainerRef.current.webkitRequestFullscreen().catch(err => {\n            console.log('Fullscreen request failed:', err);\n          });\n        } else if (playerContainerRef.current.msRequestFullscreen) {\n          playerContainerRef.current.msRequestFullscreen().catch(err => {\n            console.log('Fullscreen request failed:', err);\n          });\n        }\n      }, 100);\n    }\n  };\n\n  const seek = (seconds) => {\n    if (videoRef.current) {\n      videoRef.current.currentTime = Math.max(0, Math.min(videoRef.current.currentTime + seconds, duration));\n      \n      // Show skip feedback\n      setSkipFeedback({\n        show: true,\n        direction: seconds > 0 ? 'forward' : 'backward',\n        amount: Math.abs(seconds)\n      });\n      \n      // Hide feedback after animation\n      setTimeout(() => {\n        setSkipFeedback({ show: false, direction: '', amount: 0 });\n      }, 1000);\n    }\n  };\n\n  const restartVideo = () => {\n    if (videoRef.current) {\n      videoRef.current.currentTime = 0;\n      setSkipFeedback({\n        show: true,\n        direction: 'restart',\n        amount: 0\n      });\n      \n      // Hide feedback after animation\n      setTimeout(() => {\n        setSkipFeedback({ show: false, direction: '', amount: 0 });\n      }, 1000);\n    }\n  };\n\n  const seekToPercent = (percent) => {\n    if (videoRef.current && duration) {\n      videoRef.current.currentTime = (percent / 100) * duration;\n    }\n  };\n\n  const adjustVolume = (delta) => {\n    if (videoRef.current) {\n      const newVolume = Math.max(0, Math.min(1, volume + delta));\n      setVolume(newVolume);\n      setIsMuted(newVolume === 0);\n      videoRef.current.volume = newVolume;\n    }\n  };\n\n  const handleProgressClick = (e) => {\n    if (!progressRef.current || !videoRef.current) return;\n    const rect = progressRef.current.getBoundingClientRect();\n    const pos = (e.clientX - rect.left) / rect.width;\n    videoRef.current.currentTime = pos * duration;\n  };\n\n  const handleVolumeChange = (e) => {\n    const newVolume = parseFloat(e.target.value);\n    setVolume(newVolume);\n    setIsMuted(newVolume === 0);\n    if (videoRef.current) {\n      videoRef.current.volume = newVolume;\n    }\n  };\n\n  const toggleMute = () => {\n    if (videoRef.current) {\n      if (isMuted) {\n        videoRef.current.volume = volume;\n        setIsMuted(false);\n      } else {\n        videoRef.current.volume = 0;\n        setIsMuted(true);\n      }\n    }\n  };\n\n  const formatTime = (time) => {\n    if (isNaN(time)) return '0:00';\n    const hours = Math.floor(time / 3600);\n    const minutes = Math.floor((time % 3600) / 60);\n    const seconds = Math.floor(time % 60);\n    if (hours > 0) {\n      return `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n    }\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n  };\n\n  const toggleFullScreen = () => {\n    if (!isFullScreen) {\n      if (playerContainerRef.current.requestFullscreen) {\n        playerContainerRef.current.requestFullscreen();\n      } else if (playerContainerRef.current.mozRequestFullScreen) { /* Firefox */\n        playerContainerRef.current.mozRequestFullScreen();\n      } else if (playerContainerRef.current.webkitRequestFullscreen) { /* Chrome, Safari and Opera */\n        playerContainerRef.current.webkitRequestFullscreen();\n      } else if (playerContainerRef.current.msRequestFullscreen) { /* IE/Edge */\n        playerContainerRef.current.msRequestFullscreen();\n      }\n    } else {\n      if (document.exitFullscreen) {\n        document.exitFullscreen();\n      } else if (document.mozCancelFullScreen) { /* Firefox */\n        document.mozCancelFullScreen();\n      } else if (document.webkitExitFullscreen) { /* Chrome, Safari and Opera */\n        document.webkitExitFullscreen();\n      } else if (document.msExitFullscreen) { /* IE/Edge */\n        document.msExitFullscreen();\n      }\n    }\n  };\n\n  const togglePictureInPicture = async () => {\n    if (!videoRef.current || !isPiPSupported) return;\n    \n    try {\n      if (isPiPActive) {\n        await document.exitPictureInPicture();\n      } else {\n        await videoRef.current.requestPictureInPicture();\n      }\n    } catch (error) {\n      console.error('Picture-in-Picture error:', error);\n    }\n  };\n\n  return (\n    <div className={`player-container ${isFullScreen ? 'fullscreen' : ''}`} ref={playerContainerRef}>\n      <video\n        ref={videoRef}\n        className=\"video-player\"\n        src={video.videoSources ? video.videoSources[currentLanguage] : video.videoUrl}\n        onClick={togglePlay}\n      />\n      \n      {isBuffering && (\n        <div className=\"loading-overlay\">\n          <div className=\"spinner\"></div>\n        </div>\n      )}\n      \n      {hasError && (\n        <div className=\"error-overlay\">\n          <div className=\"error-content\">\n            <i className=\"fas fa-exclamation-triangle\"></i>\n            <h3>Video Error</h3>\n            <p>{errorMessage}</p>\n            <button \n              className=\"retry-btn\" \n              onClick={() => {\n                setHasError(false);\n                setErrorMessage('');\n                if (videoRef.current) {\n                  videoRef.current.load();\n                }\n              }}\n            >\n              Try Again\n            </button>\n          </div>\n        </div>\n      )}\n      \n      <div className={`player-controls ${showControls ? 'visible' : 'hidden'}`}>\n        <div className=\"progress-container\">\n          <div className=\"progress-bar\" ref={progressRef} onClick={handleProgressClick}>\n            <div \n              className=\"progress-filled\" \n              style={{ width: `${(currentTime / duration) * 100}%` }}\n            ></div>\n          </div>\n        </div>\n        \n        <div className=\"controls-bottom\">\n          <div className=\"controls-left\">\n            <button className=\"control-btn\" onClick={togglePlay}>\n              <i className={`fas ${isPlaying ? 'fa-pause' : 'fa-play'}`}></i>\n            </button>\n            \n            <button className=\"control-btn\" onClick={() => seek(-10)}>\n              <i className=\"fas fa-backward\"></i>\n              <span className=\"seek-text\">10</span>\n            </button>\n            \n            <button className=\"control-btn\" onClick={() => seek(10)}>\n              <i className=\"fas fa-forward\"></i>\n              <span className=\"seek-text\">10</span>\n            </button>\n            \n            <button className=\"control-btn\" onClick={restartVideo} title=\"Restart from beginning\">\n              <i className=\"fas fa-redo\"></i>\n            </button>\n            \n            <div className=\"volume-container\">\n              <button className=\"control-btn\" onClick={toggleMute}>\n                <i className={`fas ${isMuted || volume === 0 ? 'fa-volume-mute' : volume < 0.5 ? 'fa-volume-down' : 'fa-volume-up'}`}></i>\n              </button>\n              <input\n                type=\"range\"\n                min=\"0\"\n                max=\"1\"\n                step=\"0.1\"\n                value={isMuted ? 0 : volume}\n                onChange={handleVolumeChange}\n                className=\"volume-slider\"\n                ref={volumeRef}\n              />\n            </div>\n            \n            <div className=\"time-display\">\n              <span>{formatTime(currentTime)} / {formatTime(duration)}</span>\n            </div>\n          </div>\n          \n          <div className=\"controls-right\">\n            {/* Language Switcher - Force show for testing */}\n            {video && (\n              <div className=\"language-container\">\n                <button \n                  className=\"control-btn language-btn\"\n                  onClick={() => setShowLanguageMenu(!showLanguageMenu)}\n                  title=\"Switch Language\"\n                >\n                  <i className=\"fas fa-language\"></i>\n                  <span className=\"language-text\">\n                    {currentLanguage === 'sub' ? 'SUB' : 'DUB'}\n                  </span>\n                </button>\n                \n                {showLanguageMenu && (\n                  <div className=\"language-menu\">\n                    {getAvailableLanguages().map(lang => (\n                      <button\n                        key={lang.key}\n                        className={`language-option ${currentLanguage === lang.key ? 'active' : ''}`}\n                        onClick={() => switchLanguage(lang.key)}\n                      >\n                        <i className={`fas ${lang.key === 'sub' ? 'fa-closed-captioning' : 'fa-microphone'}`}></i>\n                        {lang.label}\n                      </button>\n                    ))}\n                  </div>\n                )}\n              </div>\n            )}\n\n            {isPiPSupported && (\n              <button \n                className=\"control-btn\" \n                onClick={togglePictureInPicture}\n                title={isPiPActive ? 'Exit Picture-in-Picture' : 'Picture-in-Picture'}\n              >\n                <i className={`fas ${isPiPActive ? 'fa-window-restore' : 'fa-clone'}`}></i>\n              </button>\n            )}\n            \n            <button className=\"control-btn\" onClick={toggleFullScreen}>\n              <i className={`fas ${isFullScreen ? 'fa-compress' : 'fa-expand'}`}></i>\n            </button>\n          </div>\n        </div>\n      </div>\n      \n      {/* Skip Feedback */}\n      {skipFeedback.show && (\n        <div className={`skip-feedback ${skipFeedback.direction}`}>\n          <i className={`fas ${\n            skipFeedback.direction === 'forward' ? 'fa-forward' : \n            skipFeedback.direction === 'backward' ? 'fa-backward' : \n            'fa-redo'\n          }`}></i>\n          <span>\n            {skipFeedback.direction === 'restart' ? 'Restart' : `${skipFeedback.amount}s`}\n          </span>\n        </div>\n      )}\n\n      <div className=\"center-controls\">\n        <button className=\"center-play-btn\" onClick={togglePlay} style={{ display: isPlaying ? 'none' : 'flex' }}>\n          <i className=\"fas fa-play\"></i>\n        </button>\n        \n        {/* Double-click areas for seeking */}\n        <div className=\"seek-area seek-backward\" onClick={() => seek(-10)}>\n          <div className=\"seek-indicator\">\n            <i className=\"fas fa-backward\"></i>\n            <span>10s</span>\n          </div>\n        </div>\n        \n        <div className=\"seek-area seek-forward\" onClick={() => seek(10)}>\n          <div className=\"seek-indicator\">\n            <i className=\"fas fa-forward\"></i>\n            <span>10s</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n});\n\nPlayer.displayName = 'Player';\n\nexport default Player;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}